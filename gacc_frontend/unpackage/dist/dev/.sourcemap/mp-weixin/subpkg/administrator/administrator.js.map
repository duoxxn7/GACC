{"version":3,"sources":["webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?c649","uni-app:///main.js","webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?b84b","webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?753a","webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?9073","webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?e3f1","uni-app:///subpkg/administrator/administrator.vue","webpack:///D:/miniprogramdevelop/program/gacc/subpkg/administrator/administrator.vue?f47b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","activeTab","users","pendingItems","products","sellers","userSearch","itemSearch","productSearch","showUserEditModal","showProductEditModal","showReasonDialog","currentEdit","reasonText","dialogTitle","actionType","computed","filteredUsers","user","filteredItems","item","filteredProducts","product","methods","refresh","fetchUsers","uni","url","method","res","response","console","title","icon","fetchItems","fetchProducts","getSellerName","editUser","editProduct","toggleUserStatus","showDisableDialog","showRejectDialog","onRoleChange","saveUser","saveProduct","ItemName","GameName","ItemType","Price","Stock","ItemImage","approveItem","auditorID","auditResult","rejectReason","confirmAction","successMessage","reason","adminID","cancelEdit","cancelAction","searchUsers","searchItems","searchProducts","onLoad"],"mappings":"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","file":"subpkg/administrator/administrator.js","sourcesContent":["// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1750234746065\n      var cssReload = require(\"D:/miniprogramdevelop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/administrator/administrator.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./administrator.vue?vue&type=template&id=1e950d16&scoped=true&\"\nvar renderjs\nimport script from \"./administrator.vue?vue&type=script&lang=js&\"\nexport * from \"./administrator.vue?vue&type=script&lang=js&\"\nimport style0 from \"./administrator.vue?vue&type=style&index=0&id=1e950d16&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e950d16\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/administrator/administrator.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./administrator.vue?vue&type=template&id=1e950d16&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.activeTab === \"items\"\n      ? _vm.__map(_vm.filteredItems, function (item, __i1__) {\n          var $orig = _vm.__get_orig(item)\n          var m0 = _vm.getSellerName(item.SellerID)\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  var l1 =\n    _vm.activeTab === \"products\"\n      ? _vm.__map(_vm.filteredProducts, function (product, __i2__) {\n          var $orig = _vm.__get_orig(product)\n          var m1 = _vm.getSellerName(product.SellerID)\n          return {\n            $orig: $orig,\n            m1: m1,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.activeTab = \"users\"\n    }\n    _vm.e1 = function ($event) {\n      _vm.activeTab = \"items\"\n    }\n    _vm.e2 = function ($event) {\n      _vm.activeTab = \"products\"\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./administrator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./administrator.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"admin-container\">\r\n    <!-- 顶部标题 -->\r\n    <view class=\"header\">\r\n      <text class=\"title\">管理员控制面板</text>\r\n    </view>\r\n\r\n    <!-- 选项卡 -->\r\n    <view class=\"tabs\">\r\n      <button \r\n        :class=\"['tab-button', activeTab === 'users' ? 'active' : '']\"\r\n        @click=\"activeTab = 'users'\"\r\n      >用户管理</button>\r\n      <button \r\n        :class=\"['tab-button', activeTab === 'items' ? 'active' : '']\"\r\n        @click=\"activeTab = 'items'\"\r\n      >商品审核</button>\r\n      <button \r\n        :class=\"['tab-button', activeTab === 'products' ? 'active' : '']\"\r\n        @click=\"activeTab = 'products'\"\r\n      >商品管理</button>\r\n    </view>\r\n\r\n    <!-- 用户管理 -->\r\n    <view v-if=\"activeTab === 'users'\" class=\"section\">\r\n      <view class=\"search-bar\">\r\n        <input \r\n          v-model=\"userSearch\" \r\n          placeholder=\"搜索用户名或手机号\" \r\n          class=\"search-input\"\r\n        />\r\n        <button @click=\"searchUsers\" class=\"search-button\">搜索</button>\r\n      </view>\r\n\r\n      <scroll-view scroll-y class=\"table-container\">\r\n        <table class=\"data-table\">\r\n          <tbody>\r\n            <tr v-for=\"user in filteredUsers\" :key=\"user.UserID\">\r\n              <td>{{ user.UserName }}</td>\r\n              <td>{{ user.PhoneNumber }}</td>\r\n              <td>{{ user.Role }}</td>\r\n              <td>{{ user.CreditLevel }}</td>\r\n              <td :class=\"user.CreditLevel > 0 ? 'status-enabled' : 'status-disabled'\">\r\n                {{ user.CreditLevel > 0 ? '启用' : '禁用' }}\r\n              </td>\r\n              <td class=\"actions\">\r\n                <button @click=\"editUser(user)\" class=\"btn-edit\">编辑</button>\r\n                <button \r\n                  @click=\"toggleUserStatus(user)\"\r\n                  :class=\"user.CreditLevel > 0 ? 'btn-disable' : 'btn-enable'\"\r\n                >\r\n                  {{ user.CreditLevel > 0 ? '禁用' : '启用' }}\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <!-- 商品审核 -->\r\n    <view v-if=\"activeTab === 'items'\" class=\"section\">\r\n      <view class=\"search-bar\">\r\n        <input \r\n          v-model=\"itemSearch\" \r\n          placeholder=\"搜索商品名称或ID\" \r\n          class=\"search-input\"\r\n        />\r\n        <button @click=\"searchItems\" class=\"search-button\">搜索</button>\r\n      </view>\r\n\r\n      <scroll-view scroll-y class=\"table-container\">\r\n        <table class=\"data-table\">\r\n          <tbody>\r\n            <tr v-for=\"item in filteredItems\" :key=\"item.ItemID\">\r\n              <td>{{ item.ItemID }}</td>\r\n              <td>{{ item.ItemName }}</td>\r\n              <td>{{ item.GameName }}</td>\r\n              <td>¥{{ item.Price }}</td>\r\n              <td>{{ getSellerName(item.SellerID) }}</td>\r\n              <td class=\"status-pending\">待审核</td>\r\n              <td class=\"actions\">\r\n                <button @click=\"approveItem(item)\" class=\"btn-approve\">通过</button>\r\n                <button @click=\"showRejectDialog(item)\" class=\"btn-reject\">拒绝</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <!-- 商品管理 -->\r\n    <view v-if=\"activeTab === 'products'\" class=\"section\">\r\n      <view class=\"search-bar\">\r\n        <input \r\n          v-model=\"productSearch\" \r\n          placeholder=\"搜索商品名称或ID\" \r\n          class=\"search-input\"\r\n        />\r\n        <button @click=\"searchProducts\" class=\"search-button\">搜索</button>\r\n      </view>\r\n\r\n      <scroll-view scroll-y class=\"table-container\">\r\n        <table class=\"data-table\">\r\n          <tbody>\r\n            <tr v-for=\"product in filteredProducts\" :key=\"product.ItemID\">\r\n              <td>{{ product.ItemID }}</td>\r\n              <td>{{ product.ItemName }}</td>\r\n              <td>{{ product.GameName }}</td>\r\n              <td>¥{{ product.Price }}</td>\r\n              <td>{{ getSellerName(product.SellerID) }}</td>\r\n              <td class=\"actions\">\r\n                <button @click=\"editProduct(product)\" class=\"btn-edit\">编辑</button>\r\n                <button \r\n                  v-if=\"product.IsApproved\"\r\n                  @click=\"showDisableDialog(product)\"\r\n                  class=\"btn-disable\"\r\n                >\r\n                  下架\r\n                </button>\r\n                <span v-else class=\"status-text\">需重新审核</span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <!-- 用户编辑模态框 -->\r\n    <view v-if=\"showUserEditModal\" class=\"modal\">\r\n      <view class=\"modal-content\">\r\n        <text class=\"modal-title\">编辑用户信息</text>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">用户名</text>\r\n          <input v-model=\"currentEdit.UserName\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">手机号</text>\r\n          <input v-model=\"currentEdit.PhoneNumber\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">角色</text>\r\n          <picker \r\n            @change=\"onRoleChange\" \r\n            :value=\"currentEdit.Role === '管理员' ? 1 : 0\" \r\n            :range=\"['普通用户', '管理员']\"\r\n          >\r\n            <view class=\"picker\">{{ currentEdit.Role }}</view>\r\n          </picker>\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">信誉分</text>\r\n          <input v-model=\"currentEdit.CreditLevel\" type=\"number\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"button-group\">\r\n          <button @click=\"saveUser\" class=\"btn-save\">保存</button>\r\n          <button @click=\"cancelEdit\" class=\"btn-cancel\">取消</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 商品编辑模态框 -->\r\n    <view v-if=\"showProductEditModal\" class=\"modal\">\r\n      <view class=\"modal-content\">\r\n        <text class=\"modal-title\">编辑商品信息</text>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">商品名称</text>\r\n          <input v-model=\"currentEdit.ItemName\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">游戏名称</text>\r\n          <input v-model=\"currentEdit.GameName\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">商品类型</text>\r\n          <input v-model=\"currentEdit.ItemType\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">价格</text>\r\n          <input v-model=\"currentEdit.Price\" type=\"number\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">库存</text>\r\n          <input v-model=\"currentEdit.Stock\" type=\"number\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"form-group\">\r\n          <text class=\"label\">商品图片URL</text>\r\n          <input v-model=\"currentEdit.ItemImage\" class=\"input\" />\r\n        </view>\r\n        \r\n        <view class=\"button-group\">\r\n          <button @click=\"saveProduct\" class=\"btn-save\">保存</button>\r\n          <button @click=\"cancelEdit\" class=\"btn-cancel\">取消</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 原因输入弹窗 -->\r\n    <view v-if=\"showReasonDialog\" class=\"modal\">\r\n      <view class=\"modal-content\">\r\n        <text class=\"modal-title\">{{ dialogTitle }}</text>\r\n        <textarea \r\n          v-model=\"reasonText\" \r\n          placeholder=\"请输入原因...\" \r\n          class=\"reason-input\"\r\n        />\r\n        <view class=\"button-group\">\r\n          <button @click=\"confirmAction\" class=\"btn-confirm\">确认</button>\r\n          <button @click=\"cancelAction\" class=\"btn-cancel\">取消</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 固定在底部的刷新按钮 -->\r\n    <button class=\"refresh-button\" @click=\"refresh\">刷新数据</button>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeTab: 'users',\r\n      users: [],\r\n      pendingItems: [],\r\n      products: [],\r\n      sellers: [],\r\n      userSearch: '',\r\n      itemSearch: '',\r\n      productSearch: '',\r\n      showUserEditModal: false,\r\n      showProductEditModal: false,\r\n      showReasonDialog: false,\r\n      currentEdit: {},\r\n      reasonText: '',\r\n      dialogTitle: '',\r\n      actionType: '' // 'disable' or 'enable' or 'reject' or 'disable-product'\r\n    }\r\n  },\r\n  computed: {\r\n    filteredUsers() {\r\n      const search = this.userSearch.toLowerCase()\r\n      return this.users.filter(user => \r\n        user.UserName.toLowerCase().includes(search) || \r\n        user.PhoneNumber.includes(search)\r\n      )\r\n    },\r\n    filteredItems() {\r\n      const search = this.itemSearch.toLowerCase()\r\n      return this.pendingItems.filter(item => \r\n        item.ItemName.toLowerCase().includes(search) || \r\n        item.ItemID.toLowerCase().includes(search)\r\n      )\r\n    },\r\n    filteredProducts() {\r\n      const search = this.productSearch.toLowerCase()\r\n      return this.products.filter(product => \r\n        product.ItemName.toLowerCase().includes(search) || \r\n        product.ItemID.toLowerCase().includes(search)\r\n      )\r\n    }\r\n  },\r\n  methods: {\r\n    refresh(){\r\n      this.fetchUsers();\r\n      this.fetchItems();\r\n      this.fetchProducts();\r\n    },\r\n    async fetchUsers() {\r\n      try {\r\n        const res = await uni.request({\r\n          url: 'http://localhost:3000/admin/users',\r\n          method: 'GET'\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1].data : res.data;\r\n        \r\n        if (response.code === 200) {\r\n          this.users = response.data;\r\n        } else {\r\n          throw new Error(response.message || '获取用户列表失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('获取用户列表出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '获取用户列表失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async fetchItems() {\r\n      try {\r\n        const res = await uni.request({\r\n          url: 'http://localhost:3000/admin/items',\r\n          method: 'GET'\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1].data : res.data;\r\n        \r\n        if (response.code === 200) {\r\n          this.pendingItems = response.data.items || [];\r\n          this.sellers = response.data.sellers || [];\r\n        } else {\r\n          throw new Error(response.message || '获取商品列表失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('获取商品列表出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '获取商品列表失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async fetchProducts() {\r\n      try {\r\n        const res = await uni.request({\r\n          url: 'http://localhost:3000/admin/products',\r\n          method: 'GET'\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1].data : res.data;\r\n        \r\n        if (response.code === 200) {\r\n          this.products = response.data.products || [];\r\n          this.sellers = response.data.sellers || [];\r\n        } else {\r\n          throw new Error(response.message || '获取商品列表失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('获取商品列表出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '获取商品列表失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    getSellerName(sellerID) {\r\n      const seller = this.sellers.find(s => s.UserID === sellerID);\r\n      return seller ? seller.UserName : '未知卖家';\r\n    },\r\n    \r\n    editUser(user) {\r\n      this.currentEdit = {...user};\r\n      this.showUserEditModal = true;\r\n    },\r\n    \r\n    editProduct(product) {\r\n      this.currentEdit = {...product};\r\n      this.showProductEditModal = true;\r\n    },\r\n    \r\n    toggleUserStatus(user) {\r\n      this.currentEdit = {...user};\r\n      this.actionType = user.CreditLevel > 0 ? 'disable' : 'enable';\r\n      this.dialogTitle = user.CreditLevel > 0 ? '禁用用户' : '启用用户';\r\n      this.showReasonDialog = true;\r\n    },\r\n    \r\n    showDisableDialog(product) {\r\n      this.currentEdit = {...product};\r\n      this.actionType = 'disable-product';\r\n      this.dialogTitle = '下架商品';\r\n      this.showReasonDialog = true;\r\n    },\r\n    \r\n    showRejectDialog(item) {\r\n      this.currentEdit = {...item};\r\n      this.actionType = 'reject';\r\n      this.dialogTitle = '拒绝商品上架';\r\n      this.showReasonDialog = true;\r\n    },\r\n    \r\n    onRoleChange(e) {\r\n      this.currentEdit.Role = ['普通用户', '管理员'][e.detail.value];\r\n    },\r\n    \r\n    async saveUser() {\r\n      try {\r\n        const res = await uni.request({\r\n          url: `http://localhost:3000/admin/users/${this.currentEdit.UserID}`,\r\n          method: 'PUT',\r\n          data: this.currentEdit\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1] : res;\r\n        \r\n        if (response.statusCode === 200) {\r\n          uni.showToast({\r\n            title: '用户信息更新成功',\r\n            icon: 'success'\r\n          });\r\n          this.fetchUsers();\r\n          this.showUserEditModal = false;\r\n        } else {\r\n          throw new Error(response.data?.message || '更新用户信息失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('更新用户信息出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '更新用户信息失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async saveProduct() {\r\n      try {\r\n        const res = await uni.request({\r\n          url: `http://localhost:3000/admin/items/${this.currentEdit.ItemID}`,\r\n          method: 'PUT',\r\n          data: {\r\n            ItemName: this.currentEdit.ItemName,\r\n            GameName: this.currentEdit.GameName,\r\n            ItemType: this.currentEdit.ItemType,\r\n            Price: this.currentEdit.Price,\r\n            Stock: this.currentEdit.Stock,\r\n            ItemImage: this.currentEdit.ItemImage\r\n          }\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1] : res;\r\n        \r\n        if (response.statusCode === 200) {\r\n          uni.showToast({\r\n            title: '商品信息更新成功',\r\n            icon: 'success'\r\n          });\r\n          this.fetchProducts();\r\n          this.showProductEditModal = false;\r\n        } else {\r\n          throw new Error(response.data?.message || '更新商品信息失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('更新商品信息出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '更新商品信息失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async approveItem(item) {\r\n      try {\r\n        const res = await uni.request({\r\n          url: `http://localhost:3000/admin/items/${item.ItemID}/approve`,\r\n          method: 'POST',\r\n          data: {\r\n            auditorID: this.$globalData.userID,\r\n            auditResult: '通过',\r\n            rejectReason: '符合上架标准'\r\n          }\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1] : res;\r\n        \r\n        if (response.statusCode === 200) {\r\n          uni.showToast({\r\n            title: '商品审核通过',\r\n            icon: 'success'\r\n          });\r\n          this.fetchItems();\r\n        } else {\r\n          throw new Error(response.data?.message || '审核商品失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('审核商品出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '审核商品失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async confirmAction() {\r\n      try {\r\n        let url = '';\r\n        let data = {};\r\n        let successMessage = '';\r\n        \r\n        if (this.actionType === 'disable') {\r\n          url = `http://localhost:3000/admin/users/${this.currentEdit.UserID}/disable`;\r\n          data = { \r\n            reason: this.reasonText,\r\n            adminID: this.$globalData.userID\r\n          };\r\n          successMessage = '用户禁用成功';\r\n        } \r\n        else if (this.actionType === 'enable') {\r\n          url = `http://localhost:3000/admin/users/${this.currentEdit.UserID}/enable`;\r\n          data = { \r\n            reason: this.reasonText,\r\n            adminID: this.$globalData.userID\r\n          };\r\n          successMessage = '用户启用成功';\r\n        }\r\n        else if (this.actionType === 'reject') {\r\n          url = `http://localhost:3000/admin/items/${this.currentEdit.ItemID}/reject`;\r\n          data = {\r\n            auditorID: this.$globalData.userID,\r\n            auditResult: '拒绝',\r\n            rejectReason: this.reasonText\r\n          };\r\n          successMessage = '商品已拒绝上架';\r\n        }\r\n        else if (this.actionType === 'disable-product') {\r\n          url = `http://localhost:3000/admin/items/${this.currentEdit.ItemID}/disable`;\r\n          data = { \r\n            reason: this.reasonText,\r\n            adminID: this.$globalData.userID\r\n          };\r\n          successMessage = '商品已下架，如需上架需重新审核';\r\n        }\r\n        \r\n        const res = await uni.request({\r\n          url,\r\n          method: 'POST',\r\n          data\r\n        });\r\n        \r\n        const response = Array.isArray(res) ? res[1] : res;\r\n        \r\n        if (response.statusCode === 200) {\r\n          uni.showToast({\r\n            title: successMessage,\r\n            icon: 'success'\r\n          });\r\n          \r\n          if (this.actionType === 'reject') {\r\n            this.fetchItems();\r\n          } else if (this.actionType === 'disable-product') {\r\n            this.fetchProducts();\r\n          } else {\r\n            this.fetchUsers();\r\n          }\r\n          \r\n          this.showReasonDialog = false;\r\n          this.reasonText = '';\r\n        } else {\r\n          throw new Error(response.data?.message || '操作失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('操作出错:', err);\r\n        uni.showToast({\r\n          title: err.message || '操作失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    cancelEdit() {\r\n      this.showUserEditModal = false;\r\n      this.showProductEditModal = false;\r\n      this.currentEdit = {};\r\n    },\r\n    \r\n    cancelAction() {\r\n      this.showReasonDialog = false;\r\n      this.reasonText = '';\r\n    },\r\n    \r\n    searchUsers() {\r\n      // 计算属性已处理搜索逻辑\r\n    },\r\n    \r\n    searchItems() {\r\n      // 计算属性已处理搜索逻辑\r\n    },\r\n    \r\n    searchProducts() {\r\n      // 计算属性已处理搜索逻辑\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.fetchUsers();\r\n    this.fetchItems();\r\n    this.fetchProducts();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admin-container {\r\n  padding: 20rpx;\r\n  padding-bottom: 120rpx; /* 为底部按钮留出空间 */\r\n  min-height: 100vh;\r\n  font-size: 28rpx;\r\n  position: relative;\r\n}\r\n\r\n.header {\r\n  padding: 30rpx 0;\r\n  text-align: center;\r\n  border-bottom: 1rpx solid #eee;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.tabs {\r\n  display: flex;\r\n  margin-bottom: 20rpx;\r\n  border-bottom: 1rpx solid #eee;\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.tab-button {\r\n  flex: 1;\r\n  padding: 20rpx 0;\r\n  background: none;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  position: relative;\r\n}\r\n\r\n.tab-button.active {\r\n  color: #1989fa;\r\n  font-weight: 500;\r\n}\r\n\r\n.tab-button.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 25%;\r\n  right: 25%;\r\n  height: 4rpx;\r\n  background-color: #1989fa;\r\n  border-radius: 2rpx;\r\n}\r\n\r\n.section {\r\n  margin-bottom: 30rpx;\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.search-bar {\r\n  display: flex;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  height: 70rpx;\r\n  padding: 0 20rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 8rpx;\r\n  margin-right: 10rpx;\r\n  font-size: 28rpx;\r\n  background-color: #f8f8f8;\r\n}\r\n\r\n.search-button {\r\n  width: 140rpx;\r\n  height: 70rpx;\r\n  background-color: #1989fa;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.table-container {\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.data-table th, .data-table td {\r\n  padding: 20rpx;\r\n  border: 1rpx solid #eee;\r\n  text-align: center;\r\n}\r\n\r\n.data-table th {\r\n  background-color: #f8f8f8;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-enabled {\r\n  color: #67C23A;\r\n}\r\n\r\n.status-disabled {\r\n  color: #F56C6C;\r\n}\r\n\r\n.status-pending {\r\n  color: #E6A23C;\r\n}\r\n\r\n.status-text {\r\n  color: #999;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.actions button {\r\n  margin: 0 5rpx;\r\n  padding: 8rpx 15rpx;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.btn-edit {\r\n  background-color: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.btn-disable {\r\n  background-color: #F56C6C;\r\n  color: white;\r\n}\r\n\r\n.btn-enable {\r\n  background-color: #67C23A;\r\n  color: white;\r\n}\r\n\r\n.btn-approve {\r\n  background-color: #67C23A;\r\n  color: white;\r\n}\r\n\r\n.btn-reject {\r\n  background-color: #F56C6C;\r\n  color: white;\r\n}\r\n\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  width: 80%;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  background-color: white;\r\n  border-radius: 10rpx;\r\n  padding: 30rpx;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 30rpx;\r\n  display: block;\r\n  text-align: center;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.label {\r\n  display: block;\r\n  margin-bottom: 10rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  padding: 15rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.picker {\r\n  padding: 15rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.reason-input {\r\n  width: 100%;\r\n  height: 200rpx;\r\n  padding: 15rpx;\r\n  border: 1rpx solid #ddd;\r\n  border-radius: 8rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.btn-save, .btn-confirm {\r\n  background-color: #409EFF;\r\n  color: white;\r\n}\r\n\r\n.btn-cancel {\r\n  background-color: #909399;\r\n  color: white;\r\n}\r\n\r\n/* 固定在底部的刷新按钮 */\r\n.refresh-button {\r\n  position: fixed;\r\n  left: 30rpx;\r\n  right: 30rpx;\r\n  bottom: 30rpx;\r\n  height: 80rpx;\r\n  background-color: #1989fa;\r\n  color: white;\r\n  border-radius: 40rpx;\r\n  font-size: 32rpx;\r\n  z-index: 100;\r\n  box-shadow: 0 4rpx 12rpx rgba(25, 137, 250, 0.3);\r\n  border: none;\r\n}\r\n</style>","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./administrator.vue?vue&type=style&index=0&id=1e950d16&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./administrator.vue?vue&type=style&index=0&id=1e950d16&scoped=true&lang=css&\""],"sourceRoot":""}